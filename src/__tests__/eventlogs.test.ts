/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Apideck } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Eventlogs Webhook Event Logs All", async () => {
  const testHttpClient = createTestHTTPClient("webhook.eventLogsAll");

  const apideck = new Apideck({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    apiKey: process.env["APIDECK_API_KEY"] ?? "value",
  });

  const result = await apideck.webhook.eventLogs.list({
    filter: {
      excludeApis: "vault,proxy",
      consumerId: "test_user_id",
      entityType: "Connection",
      eventType: "vault.connection.callable",
    },
  });
  expect(result.httpMeta.response.status).toBe(200);
  expect(result.getWebhookEventLogsResponse).toBeDefined();
  expect(result.getWebhookEventLogsResponse).toEqual({
    statusCode: 200,
    status: "OK",
    data: [
      {
        id: "1d174c4d-fe9e-4377-a76c-6da22fe9cd87",
        statusCode: 200,
        success: true,
        applicationId: "dSBdXd2H6Mqwfg0atXHXYcysLJE9qyn1VwBtXHX",
        consumerId: "test_consumer_id",
        unifiedApi: "crm",
        service: {
          id: "101-data-solution",
          name: "101 Data Solution",
        },
        endpoint: "https://example.com/my/webhook/endpoint",
        eventType: "vault.connection.updated",
        executionAttempt: 3,
        httpMethod: "GET",
        timestamp: "2021-07-12T14:26:17.420Z",
        entityType: "Connection",
        requestBody:
          "{\"entity\":{\"id\":\"2222+test_user_id\",\"application_id\":\"2222\",\"consumer_id\":\"test_user_id\",\"name\":\"ActiveCampaign\",\"icon\":\"https://res.cloudinary.com/apideck/image/upload/v1529455970/catalog/activecampaign/icon128x128.png\",\"logo\":\"https://www.activecampaign.com/site/assets/social-2x.png\",\"unified_api\":\"crm\",\"service_id\":\"activecampaign\",\"auth_type\":\"apiKey\",\"enabled\":true,\"tag_line\":\"Integrated email marketing, marketing automation, and small business CRM. Save time while growing your business with sales automation.\",\"website\":\"https://www.activecampaign.com/\",\"settings\":{\"instance_url\":\"https://eu28.salesforce.com\",\"base_url\":\"https://updated.api-us1.com\"},\"metadata\":{\"plan\":\"enterprise\",\"account\":{\"name\":\"My Company\"}},\"state\":\"callable\",\"created_at\":\"2021-09-10T10:39:49.628Z\",\"updated_at\":\"2021-09-10T10:39:52.715Z\"},\"entityType\":\"Connection\"}",
        responseBody: "{\"status\":\"OK\"}",
        retryScheduled: true,
        attempts: [
          {
            timestamp: "2021-07-12T14:26:17.420Z",
            executionAttempt: 3,
            statusCode: 200,
            success: true,
          },
          {
            timestamp: "2021-07-12T14:26:17.420Z",
            executionAttempt: 3,
            statusCode: 200,
            success: true,
          },
        ],
      },
      {
        id: "1d174c4d-fe9e-4377-a76c-6da22fe9cd87",
        statusCode: 200,
        success: true,
        applicationId: "dSBdXd2H6Mqwfg0atXHXYcysLJE9qyn1VwBtXHX",
        consumerId: "test_consumer_id",
        unifiedApi: "crm",
        service: {
          id: "101-data-solution",
          name: "101 Data Solution",
        },
        endpoint: "https://example.com/my/webhook/endpoint",
        eventType: "vault.connection.updated",
        executionAttempt: 3,
        httpMethod: "GET",
        timestamp: "2021-07-12T14:26:17.420Z",
        entityType: "Connection",
        requestBody:
          "{\"entity\":{\"id\":\"2222+test_user_id\",\"application_id\":\"2222\",\"consumer_id\":\"test_user_id\",\"name\":\"ActiveCampaign\",\"icon\":\"https://res.cloudinary.com/apideck/image/upload/v1529455970/catalog/activecampaign/icon128x128.png\",\"logo\":\"https://www.activecampaign.com/site/assets/social-2x.png\",\"unified_api\":\"crm\",\"service_id\":\"activecampaign\",\"auth_type\":\"apiKey\",\"enabled\":true,\"tag_line\":\"Integrated email marketing, marketing automation, and small business CRM. Save time while growing your business with sales automation.\",\"website\":\"https://www.activecampaign.com/\",\"settings\":{\"instance_url\":\"https://eu28.salesforce.com\",\"base_url\":\"https://updated.api-us1.com\"},\"metadata\":{\"plan\":\"enterprise\",\"account\":{\"name\":\"My Company\"}},\"state\":\"callable\",\"created_at\":\"2021-09-10T10:39:49.628Z\",\"updated_at\":\"2021-09-10T10:39:52.715Z\"},\"entityType\":\"Connection\"}",
        responseBody: "{\"status\":\"OK\"}",
        retryScheduled: true,
        attempts: [
          {
            timestamp: "2021-07-12T14:26:17.420Z",
            executionAttempt: 3,
            statusCode: 200,
            success: true,
          },
          {
            timestamp: "2021-07-12T14:26:17.420Z",
            executionAttempt: 3,
            statusCode: 200,
            success: true,
          },
          {
            timestamp: "2021-07-12T14:26:17.420Z",
            executionAttempt: 3,
            statusCode: 200,
            success: true,
          },
        ],
      },
      {
        id: "1d174c4d-fe9e-4377-a76c-6da22fe9cd87",
        statusCode: 200,
        success: true,
        applicationId: "dSBdXd2H6Mqwfg0atXHXYcysLJE9qyn1VwBtXHX",
        consumerId: "test_consumer_id",
        unifiedApi: "crm",
        service: {
          id: "101-data-solution",
          name: "101 Data Solution",
        },
        endpoint: "https://example.com/my/webhook/endpoint",
        eventType: "vault.connection.updated",
        executionAttempt: 3,
        httpMethod: "GET",
        timestamp: "2021-07-12T14:26:17.420Z",
        entityType: "Connection",
        requestBody:
          "{\"entity\":{\"id\":\"2222+test_user_id\",\"application_id\":\"2222\",\"consumer_id\":\"test_user_id\",\"name\":\"ActiveCampaign\",\"icon\":\"https://res.cloudinary.com/apideck/image/upload/v1529455970/catalog/activecampaign/icon128x128.png\",\"logo\":\"https://www.activecampaign.com/site/assets/social-2x.png\",\"unified_api\":\"crm\",\"service_id\":\"activecampaign\",\"auth_type\":\"apiKey\",\"enabled\":true,\"tag_line\":\"Integrated email marketing, marketing automation, and small business CRM. Save time while growing your business with sales automation.\",\"website\":\"https://www.activecampaign.com/\",\"settings\":{\"instance_url\":\"https://eu28.salesforce.com\",\"base_url\":\"https://updated.api-us1.com\"},\"metadata\":{\"plan\":\"enterprise\",\"account\":{\"name\":\"My Company\"}},\"state\":\"callable\",\"created_at\":\"2021-09-10T10:39:49.628Z\",\"updated_at\":\"2021-09-10T10:39:52.715Z\"},\"entityType\":\"Connection\"}",
        responseBody: "{\"status\":\"OK\"}",
        retryScheduled: true,
        attempts: [
          {
            timestamp: "2021-07-12T14:26:17.420Z",
            executionAttempt: 3,
            statusCode: 200,
            success: true,
          },
        ],
      },
    ],
    meta: {
      itemsOnPage: 50,
      cursors: {
        previous: "em9oby1jcm06OnBhZ2U6OjE=",
        current: "em9oby1jcm06OnBhZ2U6OjI=",
        next: "em9oby1jcm06OnBhZ2U6OjM=",
      },
    },
    links: {
      previous:
        "https://unify.apideck.com/crm/companies?cursor=em9oby1jcm06OnBhZ2U6OjE%3D",
      current: "https://unify.apideck.com/crm/companies",
      next:
        "https://unify.apideck.com/crm/companies?cursor=em9oby1jcm06OnBhZ2U6OjM",
    },
  });
});
